description "Display cast service"

start on started dbus
stop on stopping dbus

respawn

script
	if [ -x `which getprop` ] ; then
		iface=`getprop wifi.direct.interface`
		if [ "$iface" != "" ] ; then
			export AETHERCAST_DEDICATED_P2P_INTERFACE=$iface
			# FIXME this might not be true for all devices but it should
			# not cause any for those which doesn't need any firmware as
			# the Android WiFi firmware loader should just pass through
			export AETHERCAST_NEED_FIRMWARE=1
		fi
	fi

	exec /usr/sbin/aethercast
end script
